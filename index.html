<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>McCulloch-Pitts Neuron Interactive Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        #controls {
            display: none; /* Hide the controls as adjustments are in the diagram */
        }

        #neuronCanvas {
            border: 1px solid #ccc;
            margin-top: 20px;
            cursor: pointer;
        }

        /* Tooltip styles */
        .tooltip {
            position: absolute;
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 5px;
            display: none;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <canvas id="neuronCanvas" width="800" height="600"></canvas>

    <script>
        // Canvas and context
        const canvas = document.getElementById('neuronCanvas');
        const ctx = canvas.getContext('2d');

        // Initialize values
        let x1 = 1, x2 = 0, x3 = 1;
        let w1 = 2.0, w2 = -1.0, w3 = 1.0;
        let theta = 2.0;

        // Positions for interactive elements
        const positions = {
            x1: { x: 80, y: 195, radius: 20 },
            x2: { x: 80, y: 295, radius: 20 },
            x3: { x: 80, y: 395, radius: 20 },
            w1: { x: 80, y: 215, radius: 20 },
            w2: { x: 80, y: 315, radius: 20 },
            w3: { x: 80, y: 415, radius: 20 },
            theta: { x: 400, y: 400, radius: 30 },
        };

        // Function to calculate the neuron output
        function calculateNeuronOutput() {
            const S = w1 * x1 + w2 * x2 + w3 * x3;
            const y = S >= theta ? 1 : 0;
            return { S, y };
        }

        // Function to draw the neuron diagram
        function drawNeuron() {
            const { S, y } = calculateNeuronOutput();

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw neuron circle
            ctx.beginPath();
            ctx.arc(400, 300, 50, 0, 2 * Math.PI);
            ctx.fillStyle = '#ADD8E6';
            ctx.fill();
            ctx.lineWidth = 2;
            ctx.stroke();

            ctx.font = '16px Arial';
            ctx.fillStyle = '#000';
            ctx.textAlign = 'center';
            ctx.fillText('Neuron', 400, 305);

            // Draw inputs
            // x1
            ctx.beginPath();
            ctx.moveTo(100, 200);
            ctx.lineTo(350, 275);
            ctx.stroke();

            ctx.fillText(`x₁ = ${x1}`, positions.x1.x, positions.x1.y);
            ctx.fillText(`w₁ = ${w1}`, positions.w1.x, positions.w1.y);

            // x2
            ctx.beginPath();
            ctx.moveTo(100, 300);
            ctx.lineTo(350, 300);
            ctx.stroke();

            ctx.fillText(`x₂ = ${x2}`, positions.x2.x, positions.x2.y);
            ctx.fillText(`w₂ = ${w2}`, positions.w2.x, positions.w2.y);

            // x3
            ctx.beginPath();
            ctx.moveTo(100, 400);
            ctx.lineTo(350, 325);
            ctx.stroke();

            ctx.fillText(`x₃ = ${x3}`, positions.x3.x, positions.x3.y);
            ctx.fillText(`w₃ = ${w3}`, positions.w3.x, positions.w3.y);

            // Draw output
            ctx.beginPath();
            ctx.moveTo(450, 300);
            ctx.lineTo(700, 300);
            ctx.stroke();

            ctx.fillText(`y = ${y}`, 720, 305);

            // Display weighted sum and threshold
            ctx.fillText(`Weighted Sum S = ${S.toFixed(2)}`, 400, 200);
            ctx.fillText(`Threshold θ = ${theta}`, positions.theta.x, positions.theta.y);
        }

        // Function to check if a point is inside a circle
        function isInsideCircle(pos, x, y) {
            const dx = pos.x - x;
            const dy = pos.y - y;
            return dx * dx + dy * dy <= pos.radius * pos.radius;
        }

        // Function to handle canvas clicks
        canvas.addEventListener('click', function(event) {
            const rect = canvas.getBoundingClientRect();
            const xClick = event.clientX - rect.left;
            const yClick = event.clientY - rect.top;

            // Check inputs
            if (isInsideCircle(positions.x1, xClick, yClick)) {
                x1 = x1 === 0 ? 1 : 0;
                drawNeuron();
            } else if (isInsideCircle(positions.x2, xClick, yClick)) {
                x2 = x2 === 0 ? 1 : 0;
                drawNeuron();
            } else if (isInsideCircle(positions.x3, xClick, yClick)) {
                x3 = x3 === 0 ? 1 : 0;
                drawNeuron();
            }
            // Check weights
            else if (isInsideCircle(positions.w1, xClick, yClick)) {
                const newW1 = prompt('Enter new value for w₁:', w1);
                if (newW1 !== null && !isNaN(parseFloat(newW1))) {
                    w1 = parseFloat(newW1);
                    drawNeuron();
                }
            } else if (isInsideCircle(positions.w2, xClick, yClick)) {
                const newW2 = prompt('Enter new value for w₂:', w2);
                if (newW2 !== null && !isNaN(parseFloat(newW2))) {
                    w2 = parseFloat(newW2);
                    drawNeuron();
                }
            } else if (isInsideCircle(positions.w3, xClick, yClick)) {
                const newW3 = prompt('Enter new value for w₃:', w3);
                if (newW3 !== null && !isNaN(parseFloat(newW3))) {
                    w3 = parseFloat(newW3);
                    drawNeuron();
                }
            }
            // Check threshold
            else if (isInsideCircle(positions.theta, xClick, yClick)) {
                const newTheta = prompt('Enter new value for θ:', theta);
                if (newTheta !== null && !isNaN(parseFloat(newTheta))) {
                    theta = parseFloat(newTheta);
                    drawNeuron();
                }
            }
        });

        // Initial draw
        drawNeuron();
    </script>

</body>
</html>
